

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>json &mdash; AttackMate 0.5.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />

  
      <script src="../../_static/jquery.js"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
      <script src="../../_static/doctools.js"></script>
      <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="loop" href="loop.html" />
    <link rel="prev" title="include" href="include.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


          
          
          <a href="../../index.html" class="icon icon-home">
            AttackMate
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


<div class="version-switcher" style="margin: 0.5em 0;">
    <select onchange="if (this.value) window.location.href=this.value;" style="width: 100%; padding: 0.2em;">
        
        <option value="../../../v0.1.0/index.html" >
            v0.1.0
        </option>
        
        <option value="../../../v0.2.0/index.html" >
            v0.2.0
        </option>
        
        <option value="../../../v0.3.0/index.html" >
            v0.3.0
        </option>
        
        <option value="../../../v0.3.1/index.html" >
            v0.3.1
        </option>
        
        <option value="../../../v0.4.0/index.html" >
            v0.4.0
        </option>
        
        <option value="json.html" selected>
            v0.5.0
        </option>
        
        <option value="../../../v0.6.0/playbook/commands/json.html" >
            v0.6.0
        </option>
        
        <option value="../../../development/playbook/commands/json.html" >
            development
        </option>
        
        <option value="../../../main/playbook/commands/json.html" >
            main
        </option>
        
    </select>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme_link.html">AttackMate <img alt="Logo" src="/images/AttackMate_logo_no_logo.png" align="right" height="90"></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how.html">How it works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preparation/index.html">Preparation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic.html">Basic Usage</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Playbook:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../structure.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vars.html">Variables</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Commands</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="debug.html">debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="father.html">father</a></li>
<li class="toctree-l2"><a class="reference internal" href="httpclient.html">http-client</a></li>
<li class="toctree-l2"><a class="reference internal" href="include.html">include</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">json</a></li>
<li class="toctree-l2"><a class="reference internal" href="loop.html">loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="mktemp.html">mktemp</a></li>
<li class="toctree-l2"><a class="reference internal" href="msf-module.html">msf-module</a></li>
<li class="toctree-l2"><a class="reference internal" href="msf-session.html">msf-session</a></li>
<li class="toctree-l2"><a class="reference internal" href="payload.html">msf-payload</a></li>
<li class="toctree-l2"><a class="reference internal" href="regex.html">regex</a></li>
<li class="toctree-l2"><a class="reference internal" href="setvar.html">setvar</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell.html">shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="sftp.html">sftp</a></li>
<li class="toctree-l2"><a class="reference internal" href="sleep.html">sleep</a></li>
<li class="toctree-l2"><a class="reference internal" href="sliver.html">sliver</a></li>
<li class="toctree-l2"><a class="reference internal" href="sliver-session.html">sliver-session</a></li>
<li class="toctree-l2"><a class="reference internal" href="ssh.html">ssh</a></li>
<li class="toctree-l2"><a class="reference internal" href="vnc.html">vnc</a></li>
<li class="toctree-l2"><a class="reference internal" href="webserv.html">webserv</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../session/index.html">Sessions, Interactive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developing:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developing/command.html">Adding a New Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developing/baseexecutor.html">Adding a New Executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developing/integration.html">Using AttackMate in a Python Script</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Package:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../attackmate/attackmate.html">attackmate package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">AttackMate</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Commands</a></li>
      <li class="breadcrumb-item active">json</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/playbook/commands/json.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="json">
<h1>json<a class="headerlink" href="#json" title="Permalink to this heading"></a></h1>
<p>Parse variables from a JSON file or from a variable (for example, <code class="docutils literal notranslate"><span class="pre">RESULT_STDOUT</span></code>) that contains a valid JSON string.
If the “local_path” option is used, the JSON is read directly from the specified file. The “cmd” option is optional. If “local_path” is defined, the “cmd” option will be ignored.
If no “local_path” is set, the JSON is read from the “cmd” option. The variables are recursively parsed from the JSON input and saved in the variable store.
The variables are recursively parsed from the json input and are saved as single variables in the variable store.
Variable names are generated by concatenating keys at each level using an underscore (_) as a separator.
If the lowest-level value is a list of primitives (e.g., strings, integers), the list is preserved as-is without further flattening.</p>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading"></a></h2>
<p>Given the following JSON input:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;first_list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;street&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123 Main St&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;New York&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;postal_codes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">10001</span><span class="p">,</span><span class="w"> </span><span class="mi">10002</span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;friends&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Jane Smith&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;street&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;456 Oak Rd&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Los Angeles&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;postal_codes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">90001</span><span class="p">,</span><span class="w"> </span><span class="mi">90002</span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Emily Davis&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;street&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;789 Pine Ln&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Chicago&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;postal_codes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">60007</span><span class="p">,</span><span class="w"> </span><span class="mi">60008</span><span class="p">]</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The variables would be saved in the variable store as follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">first_list</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">]</span>
<span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;John</span><span class="nv"> </span><span class="s">Doe&quot;</span>
<span class="nt">user_age</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="nt">user_address_street</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;123</span><span class="nv"> </span><span class="s">Main</span><span class="nv"> </span><span class="s">St&quot;</span>
<span class="nt">user_address_city</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;New</span><span class="nv"> </span><span class="s">York&quot;</span>
<span class="nt">user_address_postal_codes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">10001</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">10002</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">10003</span><span class="p p-Indicator">]</span>
<span class="nt">user_friends_0_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jane</span><span class="nv"> </span><span class="s">Smith&quot;</span>
<span class="nt">user_friends_0_age</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">28</span>
<span class="nt">user_friends_0_address_street</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;456</span><span class="nv"> </span><span class="s">Oak</span><span class="nv"> </span><span class="s">Rd&quot;</span>
<span class="nt">user_friends_0_address_city</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Los</span><span class="nv"> </span><span class="s">Angeles&quot;</span>
<span class="nt">user_friends_0_address_postal_codes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">90001</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">90002</span><span class="p p-Indicator">]</span>
<span class="nt">user_friends_1_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Emily</span><span class="nv"> </span><span class="s">Davis&quot;</span>
<span class="nt">user_friends_1_age</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">35</span>
<span class="nt">user_friends_1_address_street</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;789</span><span class="nv"> </span><span class="s">Pine</span><span class="nv"> </span><span class="s">Ln&quot;</span>
<span class="nt">user_friends_1_address_city</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Chicago&quot;</span>
<span class="nt">user_friends_1_address_postal_codes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">60007</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">60008</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-local_path">
<span class="sig-name descname"><span class="pre">local_path</span></span><a class="headerlink" href="#confval-local_path" title="Permalink to this definition"></a></dt>
<dd><p>The JSON input to parse from. Valid input is a path to a JSON file. If “local_path” is set, the “cmd” option will be ignored.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Required<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-cmd">
<span class="sig-name descname"><span class="pre">cmd</span></span><a class="headerlink" href="#confval-cmd" title="Permalink to this definition"></a></dt>
<dd><p>The JSON input to parse from. Valid input is a variable name from the variable store (without the leading <code class="docutils literal notranslate"><span class="pre">$</span></code>) that contains a valid JSON string.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Required<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>Either <code class="docutils literal notranslate"><span class="pre">local_path</span></code> OR <code class="docutils literal notranslate"><span class="pre">cmd</span></code> is required.</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-varstore">
<span class="sig-name descname"><span class="pre">varstore</span></span><a class="headerlink" href="#confval-varstore" title="Permalink to this definition"></a></dt>
<dd><p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, logs the variable store before and after adding variables using the JSON command.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Required<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">commands</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span>
<span class="w">    </span><span class="nt">local_path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/samplefile.json&quot;</span>
<span class="w">    </span><span class="nt">varstore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shell</span>
<span class="w">    </span><span class="nt">cmd</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">cat &lt;&lt;EOF</span>
<span class="w">      </span><span class="no">{</span>
<span class="w">        </span><span class="no">&quot;name&quot;: &quot;Whiskers&quot;,</span>
<span class="w">        </span><span class="no">&quot;favorite_toys&quot;: [&quot;ball&quot;, &quot;feather&quot;, &quot;laser pointer&quot;]</span>
<span class="w">      </span><span class="no">}</span>
<span class="w">      </span><span class="no">EOF</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span>
<span class="w">    </span><span class="nt">cmd</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RESULT_STDOUT</span>
<span class="w">    </span><span class="nt">use_var</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="include.html" class="btn btn-neutral float-left" title="include" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="loop.html" class="btn btn-neutral float-right" title="loop" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Wolfgang Hotwagner.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version">
        <span class="fa fa-book"> Version</span>
        v0.5.0
    </span>

    <div class="rst-other-versions">
        <dl>
            <dt>Versions</dt>
            
            <dd>
                <a href="../../../v0.1.0/index.html">v0.1.0</a>
            </dd>
            
            <dd>
                <a href="../../../v0.2.0/index.html">v0.2.0</a>
            </dd>
            
            <dd>
                <a href="../../../v0.3.0/index.html">v0.3.0</a>
            </dd>
            
            <dd>
                <a href="../../../v0.3.1/index.html">v0.3.1</a>
            </dd>
            
            <dd>
                <a href="../../../v0.4.0/index.html">v0.4.0</a>
            </dd>
            
            <dd>
                <a href="json.html">v0.5.0</a>
            </dd>
            
            <dd>
                <a href="../../../v0.6.0/playbook/commands/json.html">v0.6.0</a>
            </dd>
            
            <dd>
                <a href="../../../development/playbook/commands/json.html">development</a>
            </dd>
            
            <dd>
                <a href="../../../main/playbook/commands/json.html">main</a>
            </dd>
            
        </dl>
    </div>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>